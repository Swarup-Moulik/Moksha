const int ITERATIONS = 100000;

// =====================
// 1. INPUT (ONCE)
// =====================
print("\nEnter a string: ");
string w = read();

print("Enter array size: ");
int size = readInt();

string arInput[size];

println("Enter " + size + " words for the array:");
for (int i = 0; i < size; i++) {
    print("ar[" + i + "]: ");
    arInput[i] = read();
}

print("\nEnter a table key: ");
string k = read();

print("Enter value for " + k + ": ");
string kValue = read();


// =====================
// 2. BENCHMARK LOOP
// =====================
for (int iter = 0; iter < ITERATIONS; iter++) {

    // --- fresh copies per iteration ---
    string ar[size];
    for (int i = 0; i < size; i++) {
        ar[i] = arInput[i];
    }

    table tab = {};
    tab[k] = kValue;
    tab["fixed"] = "unchangeable";

    // --- Array loops ---
    for (val in ar) { }

    for (idx, val in ar) { }

    for (val in ar) { }

    // --- Table loops ---
    for (key, val in tab) { }

    for (key in tab) { }

    // --- String iteration ---
    if (length(w) > 0) {
        for (ch in w) { }
    }

    // --- Complex assignment ---
    if (length(w) > 3) {
        if (length(ar) > 3) {
            ar[3] = w[3];
        }
    }

    if (length(ar) > 3) {
        tab["fromArray"] = ar[3];
    }

    int len = length(ar);

    // --- Deletion ---
    /*if (length(ar) > 3) {
        println(ar)
        delete(ar[3]);
        println(ar)
    }

    if (k in tab) {
        println(tab)
        delete(tab[k]);
        println(tab)
    }*/
}


// =====================
// 3. FINAL OUTPUT
// =====================
println("\n=== TEST COMPLETED ===");
println("Iterations executed: " + ITERATIONS);
